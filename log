INFO:config.redis_config:Connecting to Redis using URL: redis://default:********************************@redis-14657.c89.us-east-1-3.ec2.redns.redis-cloud.com:14657/0
INFO:config.redis_config:Redis connection established successfully
INFO:services.redis_flight_storage:Redis Flight Storage initialized successfully using: redis://localhost:6379/0
INFO:services.redis_flight_storage:Data compression: 17934 -> 1840 bytes (10.3%)
INFO:services.redis_flight_storage:Data compression: 17934 -> 1840 bytes (10.3%)
INFO:services.redis_flight_storage:Stored service list data with session_id: service_list:85f196acae198579befea79691cdba10
INFO:routes.clean_seat_service:üíæ Cached transformed service list data for key: service_list:85f196acae198579befea79691cdba10 - Request ID: 5c438968-7742-4ef4-8ce7-68c9be4b4b7c
[2025-08-15 12:23:48 +0300] [9368] [INFO] 127.0.0.1:62127 POST /api/verteil/service-list 1.1 200 16726 4125340
CLEAN SEAT ENDPOINT HIT - Request ID: 1d4d3345-72e1-4521-91c1-33c36a0ba4e0
INFO:routes.clean_seat_service:CLEAN SeatAvailability request received - Request ID: 1d4d3345-72e1-4521-91c1-33c36a0ba4e0
INFO:routes.clean_seat_service:Attempting to retrieve RAW flight price response from cache with key: flight_price_raw_fbeb9b62-d7b9-4009-8dd0-45000d5f888b_1755249810
INFO:routes.clean_seat_service:‚úÖ Successfully retrieved RAW flight price response from cache key: flight_price_raw_fbeb9b62-d7b9-4009-8dd0-45000d5f888b_1755249810
INFO:routes.clean_seat_service:Retrieved response type: <class 'dict'>, keys: ['ShoppingResponseID', 'PricedFlightOffers', 'DataLists']
INFO:routes.clean_seat_service:‚úÖ Validated raw NDC flight price response with keys: ['ShoppingResponseID', 'PricedFlightOffers', 'DataLists']
Building seat availability request...
Flight price response keys: ['ShoppingResponseID', 'PricedFlightOffers', 'DataLists']
Flight price response type: <class 'dict'>
INFO:scripts.build_seatavailability_rq:Building SeatAvailability request for offer index 0
INFO:scripts.build_seatavailability_rq:Multi-airline SeatAvailability detected: False
INFO:scripts.build_seatavailability_rq:Using first offer for seat availability (index 0 of 1 total offers)
INFO:scripts.build_seatavailability_rq:Successfully built SeatAvailability request for airline EY
Built request successfully
Extracted airline code for SeatAvailability: EY
Making SeatAvailability API call via shared service (airline: EY)...
[2025-08-15 12:23:55,146] INFO in core: Making POST request to https://api.stage.verteil.com/entrygate/rest/request:preSeatAvailability for service SeatAvailability (ReqID: 1d4d3345-72e1-4521-91c1-33c36a0ba4e0).
INFO:services.flight.core:Making POST request to https://api.stage.verteil.com/entrygate/rest/request:preSeatAvailability for service SeatAvailability (ReqID: 1d4d3345-72e1-4521-91c1-33c36a0ba4e0).
INFO:utils.api_logger:API request logged: api_logs\seat_availability\20250815_122355_1d4d3345-72e1-4521-91c1-33c36a0ba4e0_request.json
[2025-08-15 12:23:58,884] INFO in core: Successfully received API response for SeatAvailability (ReqID: 1d4d3345-72e1-4521-91c1-33c36a0ba4e0) with status 200
INFO:services.flight.core:Successfully received API response for SeatAvailability (ReqID: 1d4d3345-72e1-4521-91c1-33c36a0ba4e0) with status 200
INFO:utils.api_logger:API response logged: api_logs\seat_availability\20250815_122358_1d4d3345-72e1-4521-91c1-33c36a0ba4e0_response.json
SeatAvailability API call successful via shared service
INFO:routes.clean_seat_service:SeatAvailability request completed via shared service - Request ID: 1d4d3345-72e1-4521-91c1-33c36a0ba4e0
Transforming SeatAvailability response for frontend...
INFO:utils.seat_availability_transformer:Extracted 543 seats with complete aircraft layout (ALL seats included regardless of pricing)
INFO:utils.seat_availability_transformer:‚úÖ Lean frontend transformation complete: 543 seats
INFO:routes.clean_seat_service:Successfully transformed SeatAvailability response - Request ID: 1d4d3345-72e1-4521-91c1-33c36a0ba4e0
INFO:config.redis_config:Connecting to Redis using URL: redis://default:********************************@redis-14657.c89.us-east-1-3.ec2.redns.redis-cloud.com:14657/0
INFO:config.redis_config:Redis connection established successfully
INFO:services.redis_flight_storage:Redis Flight Storage initialized successfully using: redis://localhost:6379/0
INFO:services.redis_flight_storage:Data compression: 149553 -> 5948 bytes (4.0%)
INFO:services.redis_flight_storage:Data compression: 149553 -> 5948 bytes (4.0%)
INFO:services.redis_flight_storage:Stored seat availability data with session_id: seat_availability:ca91f36f4bfeff31dce26f18b4c5a0d0
INFO:routes.clean_seat_service:üíæ Cached transformed seat availability data for key: seat_availability:ca91f36f4bfeff31dce26f18b4c5a0d0 - Request ID: 1d4d3345-72e1-4521-91c1-33c36a0ba4e0
[2025-08-15 12:24:00 +0300] [9368] [INFO] 127.0.0.1:53677 POST /api/verteil/seat-availability 1.1 200 134853 5851286
INFO:routes.verteil_flights:Flight price cache check request received - Request ID: 010dab91-8dd2-4b9c-829b-e360f8d60909
INFO:services.redis_flight_storage:Retrieved flight price data for session_id: flight_price:f470232ce29c72f4d50f5821daa2763b
INFO:routes.verteil_flights:Flight price cache hit for key: flight_price:f470232ce29c72f4d50f5821daa2763b - Request ID: 010dab91-8dd2-4b9c-829b-e360f8d60909
[2025-08-15 12:24:10 +0300] [9368] [INFO] 127.0.0.1:49666 POST /api/verteil/flight-price/cache-check 1.1 200 2852 511848     
INFO:routes.verteil_flights:Flight price cache check request received - Request ID: 8224b869-51f3-40a5-ad27-4faee0f7e735     
INFO:services.redis_flight_storage:Retrieved flight price data for session_id: flight_price:f470232ce29c72f4d50f5821daa2763b
INFO:routes.verteil_flights:Flight price cache hit for key: flight_price:f470232ce29c72f4d50f5821daa2763b - Request ID: 8224b869-51f3-40a5-ad27-4faee0f7e735
[2025-08-15 12:24:10 +0300] [9368] [INFO] 127.0.0.1:54040 POST /api/verteil/flight-price/cache-check 1.1 200 2852 296952     
INFO:routes.clean_seat_service:Seat availability cache check request received - Request ID: 5fd66e3c-825a-4641-a400-f97c06006e09
INFO:config.redis_config:Connecting to Redis using URL: redis://default:********************************@redis-14657.c89.us-east-1-3.ec2.redns.redis-cloud.com:14657/0
INFO:config.redis_config:Redis connection established successfully
INFO:services.redis_flight_storage:Redis Flight Storage initialized successfully using: redis://localhost:6379/0
INFO:routes.clean_seat_service:Seat availability cache miss for key: seat_availability:d82c803beba283c2ecfdcd242df60867 - Request ID: 5fd66e3c-825a-4641-a400-f97c06006e09
[2025-08-15 12:24:51 +0300] [9368] [INFO] 127.0.0.1:64080 POST /api/verteil/seat-availability/cache-check 1.1 200 192 1480313
INFO:routes.clean_seat_service:Seat availability cache check request received - Request ID: 1e9e4135-d15b-433d-83b7-9172f2c870b1
INFO:config.redis_config:Connecting to Redis using URL: redis://default:********************************@redis-14657.c89.us-east-1-3.ec2.redns.redis-cloud.com:14657/0
INFO:config.redis_config:Redis connection established successfully
INFO:services.redis_flight_storage:Redis Flight Storage initialized successfully using: redis://localhost:6379/0
INFO:routes.clean_seat_service:Seat availability cache miss for key: seat_availability:d82c803beba283c2ecfdcd242df60867 - Request ID: 1e9e4135-d15b-433d-83b7-9172f2c870b1
[2025-08-15 12:24:52 +0300] [9368] [INFO] 127.0.0.1:64084 POST /api/verteil/seat-availability/cache-check 1.1 200 192 1355811
INFO:routes.clean_seat_service:Seat availability cache check request received - Request ID: f550c24f-e42a-4c59-b7f2-2c57303fd435
INFO:config.redis_config:Connecting to Redis using URL: redis://default:********************************@redis-14657.c89.us-east-1-3.ec2.redns.redis-cloud.com:14657/0
INFO:config.redis_config:Redis connection established successfully
INFO:services.redis_flight_storage:Redis Flight Storage initialized successfully using: redis://localhost:6379/0
INFO:routes.clean_seat_service:Seat availability cache miss for key: seat_availability:b15c663b90ef962ad5d77d589b6ffc1a - Request ID: f550c24f-e42a-4c59-b7f2-2c57303fd435
[2025-08-15 12:24:54 +0300] [9368] [INFO] 127.0.0.1:64085 POST /api/verteil/seat-availability/cache-check 1.1 200 192 2763007
INFO:routes.clean_seat_service:Seat availability cache check request received - Request ID: 482185c1-1c47-44a7-a349-c752dd574080
INFO:config.redis_config:Connecting to Redis using URL: redis://default:********************************@redis-14657.c89.us-east-1-3.ec2.redns.redis-cloud.com:14657/0
INFO:config.redis_config:Redis connection established successfully
INFO:services.redis_flight_storage:Redis Flight Storage initialized successfully using: redis://localhost:6379/0
INFO:routes.clean_seat_service:Seat availability cache miss for key: seat_availability:b15c663b90ef962ad5d77d589b6ffc1a - Request ID: 482185c1-1c47-44a7-a349-c752dd574080
[2025-08-15 12:24:55 +0300] [9368] [INFO] 127.0.0.1:64086 POST /api/verteil/seat-availability/cache-check 1.1 200 192 2792989
CLEAN SEAT ENDPOINT HIT - Request ID: a2536dd4-d666-4488-9a8e-b7c980403570
INFO:routes.clean_seat_service:CLEAN SeatAvailability request received - Request ID: a2536dd4-d666-4488-9a8e-b7c980403570    
ERROR:routes.clean_seat_service:‚ùå Rejected transformed flight price response with keys: ['direction', 'fare_family', 'flight_segments', 'offer_id', 'original_offer_id', 'passengers', 'time_limits', 'total_price']
ERROR:routes.clean_seat_service:Frontend sent transformed data instead of using flight_price_cache_key. This will cause API failures.
[2025-08-15 12:24:55 +0300] [9368] [INFO] 127.0.0.1:64080 POST /api/verteil/seat-availability 1.1 200 214 37120
CLEAN SEAT ENDPOINT HIT - Request ID: d50c3eea-07aa-449b-b48c-8cc1e77ec79b
INFO:routes.clean_seat_service:CLEAN SeatAvailability request received - Request ID: d50c3eea-07aa-449b-b48c-8cc1e77ec79b    
ERROR:routes.clean_seat_service:‚ùå Rejected transformed flight price response with keys: ['direction', 'fare_family', 'flight_segments', 'offer_id', 'original_offer_id', 'passengers', 'time_limits', 'total_price']
ERROR:routes.clean_seat_service:Frontend sent transformed data instead of using flight_price_cache_key. This will cause API failures.
[2025-08-15 12:24:55 +0300] [9368] [INFO] 127.0.0.1:64084 POST /api/verteil/seat-availability 1.1 200 214 80817
CLEAN SEAT ENDPOINT HIT - Request ID: c7c64ced-bd33-4f45-a5e1-42c8297bb53d
INFO:routes.clean_seat_service:CLEAN SeatAvailability request received - Request ID: c7c64ced-bd33-4f45-a5e1-42c8297bb53d    
ERROR:routes.clean_seat_service:‚ùå Rejected transformed flight price response with keys: ['direction', 'fare_family', 'flight_segments', 'offer_id', 'original_offer_id', 'passengers', 'time_limits', 'total_price']
ERROR:routes.clean_seat_service:Frontend sent transformed data instead of using flight_price_cache_key. This will cause API failures.
[2025-08-15 12:24:55 +0300] [9368] [INFO] 127.0.0.1:64085 POST /api/verteil/seat-availability 1.1 200 214 84126
CLEAN SEAT ENDPOINT HIT - Request ID: 31106e92-9439-43ff-81e2-ad4dfab73c8e
INFO:routes.clean_seat_service:CLEAN SeatAvailability request received - Request ID: 31106e92-9439-43ff-81e2-ad4dfab73c8e
ERROR:routes.clean_seat_service:‚ùå Rejected transformed flight price response with keys: ['direction', 'fare_family', 'flight_segments', 'offer_id', 'original_offer_id', 'passengers', 'time_limits', 'total_price']
ERROR:routes.clean_seat_service:Frontend sent transformed data instead of using flight_price_cache_key. This will cause API failures.
[2025-08-15 12:24:57 +0300] [9368] [INFO] 127.0.0.1:64080 POST /api/verteil/seat-availability 1.1 200 214 12817
