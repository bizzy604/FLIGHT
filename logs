PS C:\Users\User\Desktop\FLIGHT\Backend> python .\app.py
INFO:services.flight.booking:Method 1: Successfully imported generate_order_create_rq
Successfully loaded 9803 airports from C:\Users\User\Desktop\FLIGHT\airports.csv
 * Serving Quart app 'app'
 * Debug mode: True
 * Please use an ASGI server (e.g. Hypercorn) directly in production
 * Running on http://0.0.0.0:5000 (CTRL + C to quit)
[2025-07-03 20:16:59,274] INFO in app: Route: static -> /static/<path:filename>
INFO:app:Route: static -> /static/<path:filename>
[2025-07-03 20:16:59,275] INFO in app: Route: verteil_flights.air_shopping_test_postman -> /api/verteil/air-shopping-test-postman
INFO:app:Route: verteil_flights.air_shopping_test_postman -> /api/verteil/air-shopping-test-postman
[2025-07-03 20:16:59,275] INFO in app: Route: verteil_flights.air_shopping_test_regular -> /api/verteil/air-shopping-test-regular
INFO:app:Route: verteil_flights.air_shopping_test_regular -> /api/verteil/air-shopping-test-regular
[2025-07-03 20:16:59,276] INFO in app: Route: verteil_flights.air_shopping -> /api/verteil/air-shopping
INFO:app:Route: verteil_flights.air_shopping -> /api/verteil/air-shopping
[2025-07-03 20:16:59,276] INFO in app: Route: verteil_flights.flight_price -> /api/verteil/flight-price
INFO:app:Route: verteil_flights.flight_price -> /api/verteil/flight-price
[2025-07-03 20:16:59,277] INFO in app: Route: verteil_flights.create_order -> /api/verteil/order-create
INFO:app:Route: verteil_flights.create_order -> /api/verteil/order-create
[2025-07-03 20:16:59,279] INFO in app: Route: debug.get_token_status -> /debug/token
INFO:app:Route: debug.get_token_status -> /debug/token
[2025-07-03 20:16:59,280] INFO in app: Route: debug.clear_token -> /debug/clear-token
INFO:app:Route: debug.clear_token -> /debug/clear-token
[2025-07-03 20:16:59,280] INFO in app: Route: airport_routes.airport_autocomplete -> /api/airports/autocomplete
INFO:app:Route: airport_routes.airport_autocomplete -> /api/airports/autocomplete
[2025-07-03 20:16:59,281] INFO in app: Route: health_check -> /api/health
INFO:app:Route: health_check -> /api/health
[2025-07-03 20:16:59,281] INFO in app: Route: list_routes -> /api/debug/routes
INFO:app:Route: list_routes -> /api/debug/routes
[2025-07-03 20:16:59 +0300] [22248] [INFO] Running on http://0.0.0.0:5000 (CTRL + C to quit)
INFO:hypercorn.error:Running on http://0.0.0.0:5000 (CTRL + C to quit)
INFO:routes.verteil_flights:Incoming request: OPTIONS /api/verteil/air-shopping
INFO:routes.verteil_flights:Headers: {'Remote-Addr': '127.0.0.1', 'Host': 'localhost:5000', 'Connection': 'keep-alive', 'Accept': '*/*', 'Access-Control-Request-Method': 'POST', 'Access-Control-Request-Headers': 'content-type', 'Origin': 'http://localhost:3000', 'User-Agent': 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/138.0.0.0 Safari/537.36', 'Sec-Fetch-Mode': 'cors', 'Sec-Fetch-Site': 'same-site', 'Sec-Fetch-Dest': 'empty', 'Referer': 'http://localhost:3000/', 'Accept-Encoding': 'gzip, deflate, br, zstd', 'Accept-Language': 'en-US,en;q=0.9'}
INFO:routes.verteil_flights:Origin: http://localhost:3000
INFO:routes.verteil_flights:Access-Control-Request-Method: POST
[2025-07-03 20:17:05 +0300] [22248] [INFO] 127.0.0.1:58672 OPTIONS /api/verteil/air-shopping 1.1 200 0 13054
INFO:routes.verteil_flights:Incoming request: POST /api/verteil/air-shopping
INFO:routes.verteil_flights:Headers: {'Remote-Addr': '127.0.0.1', 'Host': 'localhost:5000', 'Connection': 'keep-alive', 'Content-Length': '281', 'Sec-Ch-Ua-Platform': '"Windows"', 'User-Agent': 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/138.0.0.0 Safari/537.36', 'Accept': 'application/json', 'Sec-Ch-Ua': '"Not)A;Brand";v="8", "Chromium";v="138", "Google Chrome";v="138"', 'Content-Type': 'application/json', 'Sec-Ch-Ua-Mobile': '?0', 'Origin': 'http://localhost:3000', 'Sec-Fetch-Site': 'same-site', 'Sec-Fetch-Mode': 'cors', 'Sec-Fetch-Dest': 'empty', 'Referer': 'http://localhost:3000/', 'Accept-Encoding': 'gzip, deflate, br, zstd', 'Accept-Language': 'en-US,en;q=0.9'}
INFO:routes.verteil_flights:Origin: http://localhost:3000
INFO:routes.verteil_flights:Access-Control-Request-Method: None
INFO:routes.verteil_flights:Air shopping request received - Request ID: 09101d65-a343-469b-a0d1-97ac430742c1
INFO:routes.verteil_flights:[DEBUG] Split round trip segment into two: [{'origin': 'BOM', 'destination': 'DXB', 'departureDate': '2025-07-06'}, {'origin': 'DXB', 'destination': 'BOM', 'departureDate': '2025-07-27'}]
INFO:routes.verteil_flights:[DEBUG] Mapped outbound cabin BUSINESS to BUSINESS
INFO:routes.verteil_flights:[DEBUG] Mapped return cabin BUSINESS to BUSINESS
INFO:routes.verteil_flights:Original request data: {'tripType': 'ROUND_TRIP', 'odSegments': [{'origin': 'BOM', 'destination': 'DXB', 'departureDate': '2025-07-06', 'returnDate': '2025-07-27'}], 'numAdults': 2, 'numChildren': 1, 'numInfants': 1, 'outboundCabinClass': 'BUSINESS', 'returnCabinClass': 'BUSINESS', 'enableRoundtrip': True, 'directOnly': False}
INFO:routes.verteil_flights:Converted request data: {'trip_type': 'ROUND_TRIP', 'odSegments': [{'origin': 'BOM', 'destination': 'DXB', 'departureDate': '2025-07-06', 'cabinPreference': 'BUSINESS'}, {'origin': 'DXB', 'destination': 'BOM', 'departureDate': '2025-07-27', 'cabinPreference': 'BUSINESS'}], 'num_adults': 2, 'num_children': 1, 'num_infants': 1, 'outbound_cabin_class': 'BUSINESS', 'return_cabin_class': 'BUSINESS', 'enableRoundtrip': True, 'directOnly': False}
INFO:routes.verteil_flights:Using enhanced air shopping service - Request ID: 09101d65-a343-469b-a0d1-97ac430742c1
[2025-07-03 20:17:05,785] INFO in core: FlightService initialized with necessary OAuth configurations.
INFO:services.flight.core:FlightService initialized with necessary OAuth configurations.
INFO:services.flight.air_shopping:Initialized AirShoppingService with multi-airline support
[2025-07-03 20:17:05,801] INFO in core: FlightService initialized with necessary OAuth configurations.
INFO:services.flight.core:FlightService initialized with necessary OAuth configurations.
INFO:services.flight.air_shopping:Starting enhanced air shopping search - Request ID: 9efd9d3d-9175-4efb-8b02-8064f629620e
[2025-07-03 20:17:05,806] INFO in search: [DEBUG] Round-trip: Using cabin preference from first segment: 'BUSINESS'
INFO:services.flight.search:[DEBUG] Round-trip: Using cabin preference from first segment: 'BUSINESS'
[2025-07-03 20:17:05,807] INFO in search: [DEBUG] Cabin preference: 'BUSINESS' -> cabin_code: 'C'
INFO:services.flight.search:[DEBUG] Cabin preference: 'BUSINESS' -> cabin_code: 'C'
INFO:utils.auth:Fetching new OAuth2 token...
INFO:utils.auth:Successfully obtained new token. Expires in 43199 seconds.
[2025-07-03 20:17:07,856] INFO in core: Making POST request to https://api.stage.verteil.com/entrygate/rest/request:airShopping for service AirShopping (ReqID: ddb76c23-87a3-4e26-9cc6-f3be7f8b5300).
INFO:services.flight.core:Making POST request to https://api.stage.verteil.com/entrygate/rest/request:airShopping for service AirShopping (ReqID: ddb76c23-87a3-4e26-9cc6-f3be7f8b5300).
[2025-07-03 20:17:30,987] INFO in core: Successfully received API response for AirShopping (ReqID: ddb76c23-87a3-4e26-9cc6-f3be7f8b5300) with status 200
INFO:services.flight.core:Successfully received API response for AirShopping (ReqID: ddb76c23-87a3-4e26-9cc6-f3be7f8b5300) with status 200
[2025-07-03 20:17:30,988] INFO in core: No AirlineList found in DataLists
INFO:services.flight.core:No AirlineList found in DataLists
[2025-07-03 20:17:30,989] INFO in search: Successfully received raw AirShopping response for request_id: ddb76c23-87a3-4e26-9cc6-f3be7f8b5300
INFO:services.flight.search:Successfully received raw AirShopping response for request_id: ddb76c23-87a3-4e26-9cc6-f3be7f8b5300        
INFO:services.flight.air_shopping:Raw search completed in 25.184s - Request ID: 9efd9d3d-9175-4efb-8b02-8064f629620e
INFO:utils.multi_airline_detector:[DEBUG] Checking multi-airline response. Top-level keys: ['Warnings', 'OffersGroup', 'DataLists', 'Metadata', 'Errors']
INFO:utils.multi_airline_detector:[DEBUG] DataLists keys: ['AnonymousTravelerList', 'CarryOnAllowanceList', 'CheckedBagAllowanceList', 'FareList', 'FlightSegmentList', 'FlightList', 'OriginDestinationList', 'MediaList', 'PenaltyList', 'PriceClassList']
INFO:utils.multi_airline_detector:[DEBUG] Found 24 travelers
INFO:utils.multi_airline_detector:[DEBUG] Traveler 0 ObjectKey: QR-PAX1
INFO:utils.multi_airline_detector:[DEBUG] Found airline-prefixed traveler: QR-PAX1
INFO:utils.multi_airline_detector:Multi-airline response detected via prefixed references
INFO:utils.multi_airline_detector:[DEBUG] Checking multi-airline response. Top-level keys: ['Warnings', 'OffersGroup', 'DataLists', 'Metadata', 'Errors']
INFO:utils.multi_airline_detector:[DEBUG] DataLists keys: ['AnonymousTravelerList', 'CarryOnAllowanceList', 'CheckedBagAllowanceList', 'FareList', 'FlightSegmentList', 'FlightList', 'OriginDestinationList', 'MediaList', 'PenaltyList', 'PriceClassList']
INFO:utils.multi_airline_detector:[DEBUG] Found 24 travelers
INFO:utils.multi_airline_detector:[DEBUG] Traveler 0 ObjectKey: QR-PAX1
INFO:utils.multi_airline_detector:[DEBUG] Found airline-prefixed traveler: QR-PAX1
INFO:utils.multi_airline_detector:Multi-airline response detected via prefixed references
INFO:utils.reference_extractor:Initialized reference extractor for multi-airline response
INFO:utils.reference_extractor:Extracting multi-airline references
INFO:utils.multi_airline_detector:Extracted airline codes: ['CX', 'EK', 'ET', 'KQ', 'QR', 'WY']
INFO:utils.reference_extractor:Extracted multi-airline references for 6 airlines
INFO:utils.reference_extractor:Successfully extracted references
INFO:transformers.enhanced_air_shopping_transformer:Initialized enhanced transformer for multi-airline response
INFO:transformers.enhanced_air_shopping_transformer:Transforming multi-airline offers
INFO:transformers.enhanced_air_shopping_transformer:Transformed 854 multi-airline offers
INFO:transformers.enhanced_air_shopping_transformer:Successfully transformed 854 offers for results page
INFO:services.flight.air_shopping:Enhanced transformation completed in 0.090s - 854 offers, Multi-airline: True - Request ID: 9efd9d3d-9175-4efb-8b02-8064f629620e
INFO:utils.multi_airline_detector:[DEBUG] Checking multi-airline response. Top-level keys: ['Warnings', 'OffersGroup', 'DataLists', 'Metadata', 'Errors']
INFO:utils.multi_airline_detector:[DEBUG] DataLists keys: ['AnonymousTravelerList', 'CarryOnAllowanceList', 'CheckedBagAllowanceList', 'FareList', 'FlightSegmentList', 'FlightList', 'OriginDestinationList', 'MediaList', 'PenaltyList', 'PriceClassList']
INFO:utils.multi_airline_detector:[DEBUG] Found 24 travelers
INFO:utils.multi_airline_detector:[DEBUG] Traveler 0 ObjectKey: QR-PAX1
INFO:utils.multi_airline_detector:[DEBUG] Found airline-prefixed traveler: QR-PAX1
INFO:utils.multi_airline_detector:Multi-airline response detected via prefixed references
INFO:utils.multi_airline_detector:[DEBUG] Checking multi-airline response. Top-level keys: ['Warnings', 'OffersGroup', 'DataLists', 'Metadata', 'Errors']
INFO:utils.multi_airline_detector:[DEBUG] DataLists keys: ['AnonymousTravelerList', 'CarryOnAllowanceList', 'CheckedBagAllowanceList', 'FareList', 'FlightSegmentList', 'FlightList', 'OriginDestinationList', 'MediaList', 'PenaltyList', 'PriceClassList']
INFO:utils.multi_airline_detector:[DEBUG] Found 24 travelers
INFO:utils.multi_airline_detector:[DEBUG] Traveler 0 ObjectKey: QR-PAX1
INFO:utils.multi_airline_detector:[DEBUG] Found airline-prefixed traveler: QR-PAX1
INFO:utils.multi_airline_detector:Multi-airline response detected via prefixed references
INFO:utils.reference_extractor:Initialized reference extractor for multi-airline response
INFO:utils.reference_extractor:Extracting multi-airline references
INFO:utils.multi_airline_detector:Extracted airline codes: ['CX', 'EK', 'ET', 'KQ', 'QR', 'WY']
INFO:utils.reference_extractor:Extracted multi-airline references for 6 airlines
INFO:utils.reference_extractor:Successfully extracted references
INFO:utils.multi_airline_flight_card_generator:Initialized flight card generator for multi-airline response
INFO:utils.multi_airline_flight_card_generator:Generated 854 enhanced flight cards
INFO:services.flight.air_shopping:Enhanced flight cards generated in 2.184s - 854 cards - Request ID: 9efd9d3d-9175-4efb-8b02-8064f629620e
INFO:services.flight.air_shopping:Enhanced air shopping completed successfully in 27.460s - Request ID: 9efd9d3d-9175-4efb-8b02-8064f629620e
INFO:routes.verteil_flights:Successfully processed enhanced air shopping request - Request ID: 09101d65-a343-469b-a0d1-97ac430742c1
[2025-07-03 20:17:33 +0300] [22248] [INFO] 127.0.0.1:58672 POST /api/verteil/air-shopping 1.1 200 32932396 27813053
INFO:routes.verteil_flights:Incoming request: OPTIONS /api/verteil/flight-price
INFO:routes.verteil_flights:Headers: {'Remote-Addr': '127.0.0.1', 'Host': 'localhost:5000', 'Connection': 'keep-alive', 'Accept': '*/*', 'Access-Control-Request-Method': 'POST', 'Access-Control-Request-Headers': 'content-type', 'Origin': 'http://localhost:3000', 'User-Agent': 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/138.0.0.0 Safari/537.36', 'Sec-Fetch-Mode': 'cors', 'Sec-Fetch-Site': 'same-site', 'Sec-Fetch-Dest': 'empty', 'Referer': 'http://localhost:3000/', 'Accept-Encoding': 'gzip, deflate, br, zstd', 'Accept-Language': 'en-US,en;q=0.9'}
INFO:routes.verteil_flights:Origin: http://localhost:3000
INFO:routes.verteil_flights:Access-Control-Request-Method: POST
[2025-07-03 20:18:08 +0300] [22248] [INFO] 127.0.0.1:58706 OPTIONS /api/verteil/flight-price 1.1 200 0 11238
INFO:routes.verteil_flights:Incoming request: OPTIONS /api/verteil/flight-price
INFO:routes.verteil_flights:Headers: {'Remote-Addr': '127.0.0.1', 'Host': 'localhost:5000', 'Connection': 'keep-alive', 'Accept': '*/*', 'Access-Control-Request-Method': 'POST', 'Access-Control-Request-Headers': 'content-type', 'Origin': 'http://localhost:3000', 'User-Agent': 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/138.0.0.0 Safari/537.36', 'Sec-Fetch-Mode': 'cors', 'Sec-Fetch-Site': 'same-site', 'Sec-Fetch-Dest': 'empty', 'Referer': 'http://localhost:3000/', 'Accept-Encoding': 'gzip, deflate, br, zstd', 'Accept-Language': 'en-US,en;q=0.9'}
INFO:routes.verteil_flights:Origin: http://localhost:3000
INFO:routes.verteil_flights:Access-Control-Request-Method: POST
[2025-07-03 20:18:08 +0300] [22248] [INFO] 127.0.0.1:58707 OPTIONS /api/verteil/flight-price 1.1 200 0 18325
INFO:routes.verteil_flights:Incoming request: POST /api/verteil/flight-price
INFO:routes.verteil_flights:Headers: {'Remote-Addr': '127.0.0.1', 'Host': 'localhost:5000', 'Connection': 'keep-alive', 'Content-Length': '859', 'Sec-Ch-Ua-Platform': '"Windows"', 'User-Agent': 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/138.0.0.0 Safari/537.36', 'Accept': 'application/json', 'Sec-Ch-Ua': '"Not)A;Brand";v="8", "Chromium";v="138", "Google Chrome";v="138"', 'Content-Type': 'application/json', 'Sec-Ch-Ua-Mobile': '?0', 'Origin': 'http://localhost:3000', 'Sec-Fetch-Site': 'same-site', 'Sec-Fetch-Mode': 'cors', 'Sec-Fetch-Dest': 'empty', 'Referer': 'http://localhost:3000/', 'Accept-Encoding': 'gzip, deflate, br, zstd', 'Accept-Language': 'en-US,en;q=0.9'}
INFO:routes.verteil_flights:Origin: http://localhost:3000
INFO:routes.verteil_flights:Access-Control-Request-Method: None
INFO:routes.verteil_flights:Flight price request received - Request ID: 7c6fbec3-fd22-47dd-b1b5-d5bbc424b964
INFO:routes.verteil_flights:Request data keys: ['offer_id', 'shopping_response_id', 'air_shopping_response'] - Request ID: 7c6fbec3-fd22-47dd-b1b5-d5bbc424b964
INFO:routes.verteil_flights:Processing flight price request - Offer ID: 60, Shopping Response ID: BACKEND_WILL_EXTRACT - Request ID: 7c6fbec3-fd22-47dd-b1b5-d5bbc424b964
INFO:routes.verteil_flights:[DEBUG] Flight price request - Offer ID: 60, Type: str
INFO:services.flight.pricing:[INFO] Processing flight price request for offer ID: 60
[2025-07-03 20:18:08,193] INFO in core: FlightService initialized with necessary OAuth configurations.
INFO:services.flight.core:FlightService initialized with necessary OAuth configurations.
INFO:services.flight.pricing:[INFO] Starting flight price request for offer ID: 60
INFO:services.flight.pricing:Frontend requested backend to extract ShoppingResponseID from multi-airline response
INFO:services.flight.pricing:[DEBUG] Air shopping response keys: ['VdcErrors']
INFO:services.flight.pricing:Starting enhanced airline code extraction for offer_id: 60
INFO:utils.multi_airline_detector:[DEBUG] Checking multi-airline response. Top-level keys: ['VdcErrors']
INFO:utils.multi_airline_detector:[DEBUG] DataLists keys: []
INFO:utils.multi_airline_detector:[DEBUG] Found 0 travelers
INFO:utils.multi_airline_detector:[DEBUG] Found 0 segments
INFO:utils.multi_airline_detector:[DEBUG] No airline-prefixed references found
INFO:utils.multi_airline_detector:Single-airline response detected
INFO:services.flight.pricing:Extracting airline code from single-airline offer: 60
WARNING:services.flight.pricing:Could not find single-airline offer 60 in AirShopping response
INFO:services.flight.pricing:Extracted airline code 'None' for offer 60 (ReqID: 7c6fbec3-fd22-47dd-b1b5-d5bbc424b964)
ERROR:services.flight.pricing:Validation error in get_flight_price: Could not determine airline code for ShoppingResponseID extraction 
INFO:routes.verteil_flights:Flight price request completed with status: error - Request ID: 7c6fbec3-fd22-47dd-b1b5-d5bbc424b964       
ERROR:routes.verteil_flights:Error in flight price request: Could not determine airline code for ShoppingResponseID extraction - Request ID: 7c6fbec3-fd22-47dd-b1b5-d5bbc424b964
[2025-07-03 20:18:08 +0300] [22248] [INFO] 127.0.0.1:58706 POST /api/verteil/flight-price 1.1 200 161 25398
INFO:routes.verteil_flights:Incoming request: POST /api/verteil/flight-price
INFO:routes.verteil_flights:Headers: {'Remote-Addr': '127.0.0.1', 'Host': 'localhost:5000', 'Connection': 'keep-alive', 'Content-Length': '859', 'Sec-Ch-Ua-Platform': '"Windows"', 'User-Agent': 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/138.0.0.0 Safari/537.36', 'Accept': 'application/json', 'Sec-Ch-Ua': '"Not)A;Brand";v="8", "Chromium";v="138", "Google Chrome";v="138"', 'Content-Type': 'application/json', 'Sec-Ch-Ua-Mobile': '?0', 'Origin': 'http://localhost:3000', 'Sec-Fetch-Site': 'same-site', 'Sec-Fetch-Mode': 'cors', 'Sec-Fetch-Dest': 'empty', 'Referer': 'http://localhost:3000/', 'Accept-Encoding': 'gzip, deflate, br, zstd', 'Accept-Language': 'en-US,en;q=0.9'}
INFO:routes.verteil_flights:Origin: http://localhost:3000
INFO:routes.verteil_flights:Access-Control-Request-Method: None
INFO:routes.verteil_flights:Flight price request received - Request ID: 63d1c828-fef6-4b5d-a3bd-70c02b236030
INFO:routes.verteil_flights:Request data keys: ['offer_id', 'shopping_response_id', 'air_shopping_response'] - Request ID: 63d1c828-fef6-4b5d-a3bd-70c02b236030
INFO:routes.verteil_flights:Processing flight price request - Offer ID: 60, Shopping Response ID: BACKEND_WILL_EXTRACT - Request ID: 63d1c828-fef6-4b5d-a3bd-70c02b236030
INFO:routes.verteil_flights:[DEBUG] Flight price request - Offer ID: 60, Type: str
INFO:services.flight.pricing:[INFO] Processing flight price request for offer ID: 60
[2025-07-03 20:18:08,220] INFO in core: FlightService initialized with necessary OAuth configurations.
INFO:services.flight.core:FlightService initialized with necessary OAuth configurations.
INFO:services.flight.pricing:[INFO] Starting flight price request for offer ID: 60
INFO:services.flight.pricing:Frontend requested backend to extract ShoppingResponseID from multi-airline response
INFO:services.flight.pricing:[DEBUG] Air shopping response keys: ['VdcErrors']
INFO:services.flight.pricing:Starting enhanced airline code extraction for offer_id: 60
INFO:utils.multi_airline_detector:[DEBUG] Checking multi-airline response. Top-level keys: ['VdcErrors']
INFO:utils.multi_airline_detector:[DEBUG] DataLists keys: []
INFO:utils.multi_airline_detector:[DEBUG] Found 0 travelers
INFO:utils.multi_airline_detector:[DEBUG] Found 0 segments
INFO:utils.multi_airline_detector:[DEBUG] No airline-prefixed references found
INFO:utils.multi_airline_detector:Single-airline response detected
INFO:services.flight.pricing:Extracting airline code from single-airline offer: 60
WARNING:services.flight.pricing:Could not find single-airline offer 60 in AirShopping response
INFO:services.flight.pricing:Extracted airline code 'None' for offer 60 (ReqID: 63d1c828-fef6-4b5d-a3bd-70c02b236030)
ERROR:services.flight.pricing:Validation error in get_flight_price: Could not determine airline code for ShoppingResponseID extraction 
INFO:routes.verteil_flights:Flight price request completed with status: error - Request ID: 63d1c828-fef6-4b5d-a3bd-70c02b236030       
ERROR:routes.verteil_flights:Error in flight price request: Could not determine airline code for ShoppingResponseID extraction - Request ID: 63d1c828-fef6-4b5d-a3bd-70c02b236030
[2025-07-03 20:18:08 +0300] [22248] [INFO] 127.0.0.1:58707 POST /api/verteil/flight-price 1.1 200 161 46447
